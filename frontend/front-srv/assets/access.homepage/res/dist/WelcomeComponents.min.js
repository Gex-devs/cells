(()=>{"use strict";var e={689:e=>{e.exports=require("react")}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};(()=>{r.r(n),r.d(n,{HomeDashboard:()=>Ne});var e=r(689),t=r.n(e);const o=require("pydio");var i=r.n(o);const a=require("material-ui"),l=require("material-ui/styles");var c=r(689),s=function(e){var t,r=e.pydio,n=e.pluginName,o=e.pluginParameter,i=e.style,a=e.darkMode,l=e.className,s=r.Registry.getPluginConfigs(n).get(o);return s||(s=r.Registry.getDefaultImageFromParameters(n,o)),s&&(0===s.indexOf("plug/")?(-1!==s.indexOf("[mode]")&&(s=s.replace("[mode]",a?"dark":"light")),t=s):t=r.Parameters.get("ENDPOINT_REST_API")+"/frontend/binaries/GLOBAL/"+s),c.createElement("img",{alt:"application logo",src:t,style:i,className:l})};function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==u(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===u(o)?o:String(o)),n)}var o}function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f(e,t)}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}var m=i().requireLib("boot"),y=m.AsyncComponent,h=m.PydioContextConsumer,g=i().requireLib("workspaces"),b=g.ThemeTogglerCard,v=g.Scheme,w=function(e){var t=function(e){return React.createElement("div",{style:{position:"absolute",top:52,left:20,width:80,display:"flex",transformOrigin:"left",transform:"rotate("+-e+"deg)"}},React.createElement("span",{style:{flex:1}}),React.createElement("span",{className:"mdi mdi-dots-horizontal",style:{opacity:.5,marginRight:5}}),React.createElement("span",{style:{display:"inline-block",transform:"rotate("+e+"deg)"},className:"mdi mdi-account"}))};return React.createElement("div",null,React.createElement("p",null,e.message("workspaces.1")),React.createElement(v,{dimension:130},React.createElement("span",{style:{position:"absolute",top:52,left:20},className:"mdi mdi-network"}),t(30),t(0),t(-30)),React.createElement("p",null,e.message("workspaces.2")),React.createElement(v,{dimension:130},React.createElement("span",{className:"mdi mdi-account",style:{position:"absolute",left:54,top:32}}),React.createElement("div",{style:{position:"absolute",top:60,left:30}},React.createElement("span",{className:"mdi mdi-folder"}),React.createElement("span",{className:"mdi mdi-arrow-right"}),React.createElement("span",{className:"mdi mdi-network"}))))},S=function(e){return React.createElement("div",null,React.createElement("p",null,e.message("globsearch.1")),React.createElement(v,{style:{fontSize:10,padding:25},dimension:130},React.createElement("div",{style:{boxShadow:"2px 2px 0px #CFD8DC"}},React.createElement("div",{style:{backgroundColor:"#03a9f4",color:"white",borderRadius:"3px 3px 0 0"}},React.createElement("span",{className:"mdi mdi-magnify"}),e.message("infopanel.search"),"..."),React.createElement("div",{style:{backgroundColor:"white"}},React.createElement("div",null,React.createElement("span",{className:"mdi mdi-folder"})," ",e.message("infopanel.folder")," 1 "),React.createElement("div",null,React.createElement("span",{className:"mdi mdi-folder"}),"  ",e.message("infopanel.file")," 2"),React.createElement("div",null,React.createElement("span",{className:"mdi mdi-file"})," ",e.message("infopanel.file")," 3")))),React.createElement("p",null,e.message("globsearch.2")))},O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=d(n);if(o){var r=d(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this,e,t)).state={started:!(e.pydio.user&&!e.pydio.user.getPreference("gui_preferences",!0)["UserAccount.WelcomeModal.Shown"])},r}return t=a,r=[{key:"componentDidMount",value:function(){var e=this,t=this.props.pydio;this.state.started||setTimeout((function(){t.UI.openComponentInModal("UserAccount","WelcomeModal",{onRequestStart:function(t){t?e.discard(!0):(e.discard(!1),e.setState({started:!0}))}})}),500)}},{key:"discard",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.props,r=t.pydio,n=t.onFinish,o=r.user,i=o.getPreference("gui_preferences",!0);i["UserAccount.WelcomeModal.Shown"]=!0,e&&(i["WelcomeComponent.MUITour"]=!0,i["WelcomeComponent.Pydio8.TourGuide.Welcome"]=!0,n&&n()),o.setPreference("gui_preferences",i,!0),o.savePreference("gui_preferences")}},{key:"render",value:function(){var e=this;if(!this.state.started)return null;var t=this.props.getMessage,r=function(e){return t("ajax_gui.tour."+e)},n=[{title:r("theme.title"),text:React.createElement(b,{message:r}),selector:".mdi.mdi-theme-light-dark",position:"right-end"},{title:r("workspaces.title"),text:React.createElement(w,{message:r}),selector:".mdi-folder-multiple-outline",position:"right"},{title:r("globsearch.title"),text:React.createElement(S,{message:r}),selector:".home-search-form",position:"bottom"}];return React.createElement(y,{namespace:"PydioWorkspaces",componentName:"TourGuide",ref:"joyride",steps:n,run:!0,autoStart:!0,debug:!1,callback:function(t){"step:after"===t.type&&t.index===n.length-1&&e.discard(!0)},type:"continuous"})}}],r&&p(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(e.Component);O=h(O);const x=require("pydio/util/path");var E=r.n(x);const P=require("pydio/util/dom");var R=r.n(P);function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function T(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==j(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==j(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===j(o)?o:String(o)),n)}var o}function k(e,t){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},k(e,t)}function C(e){return C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},C(e)}var _=i().requireLib("components"),M=_.SimpleList,D=_.NodeListCustomProvider,N=i().requireLib("boot"),I=N.PydioContextConsumer,L=N.moment,z=i().requireLib("workspaces"),F=z.UnifiedSearchForm,W=z.Facets,B=z.SearchSorter,A=z.FilePreview,q=z.AdvancedChips,H=i().requireLib("hoc").withSearch,U=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k(e,t)}(c,e);var r,n,o,i,l=(o=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=C(o);if(i){var r=C(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===j(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function c(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),l.call(this,e)}return r=c,n=[{key:"componentDidMount",value:function(){var e=this.props.onFocusChange;this._escListener=function(t){"Escape"===t.key&&e(!1)},document.addEventListener("keyup",this._escListener)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keyup",this._escListener)}},{key:"update",value:function(e){(0,this.props.searchTools.setValues)({basenameOrContent:e})}},{key:"render",value:function(){var e=this.props,r=e.searchTools,n=e.searchTools,o=n.facets,i=n.activeFacets,l=n.toggleFacet,c=n.loading,s=n.dataModel,u=n.empty,p=n.resultsCount,f=this.props,d=f.style,m=f.zDepth,y=f.pydio,h=f.fullScreen,g=f.fullScreenTransition,b=f.onFocusChange,v=f.muiTheme,w="mui3"===v.userTheme,S=v.palette.mui3,O="rgba(0,0,0,.53)",x={mainContainer:{position:"absolute",top:h?0:199,left:w?74:0,right:0,bottom:0,transition:"all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms",display:"flex",flexDirection:"column",alignItems:"center"},searchContainer:{width:"100%",zIndex:1,display:"flex",flexDirection:"column",alignItems:"center",background:w&&h?S["surface-1"]:"transparent",padding:h?w?"10px 50px 10px 10px":"10px 50px":0},textFieldContainer:{width:"100%",maxWidth:h?1e4:700,display:"flex",alignItems:"center",background:w?S["surface-variant"]:"#eceff1",height:h?40:50,padding:"2px 4px",borderRadius:50,marginTop:h?0:-25},textField:{flex:1},textInput:{color:"inherit"},textHint:{color:O,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",width:"100%"},magnifier:{color:O,fontSize:20,padding:"14px 8px"},close:{position:"absolute",right:2,top:6,zIndex:2},searchForm:{mainStyle:{backgroundColor:"transparent",height:48,border:0},completeMenuStyle:{width:"100%"},inputStyle:{fontSize:18},hintStyle:{fontSize:18},magnifierStyle:{fontSize:20,marginRight:10},filterButton:{color:v.palette.primary1Color,fontSize:22,width:28,height:28,padding:3},filterButtonActive:{}},facets:{container:{width:230,overflowY:"auto",background:S["surface-2"],color:w?S["on-surface-variant"]:"#5c7784",borderRadius:0,borderRight:w?"1px solid "+S["outline-variant-50"]:void 0,paddingLeft:16,paddingRight:16,paddingTop:10},header:{fontWeight:500,padding:"10px 0",fontSize:15},subHeader:{fontWeight:500,textTransform:"uppercase",padding:"12px 0"}}},P={iconClassName:"",primaryTextId:c?"searchengine.searching":478,style:{backgroundColor:"transparent"}};return u&&(P.primaryTextId="searchengine.start"),t().createElement(a.Paper,{style:d,zDepth:m,className:"vertical-layout home-center-paper",rounded:!1},t().createElement("div",{style:x.mainContainer},t().createElement(a.Paper,{zDepth:h?1:0,rounded:!1,style:x.searchContainer},t().createElement(a.Paper,{zDepth:0,style:x.textFieldContainer,className:"home-search-form"},t().createElement(F,{style:{flex:1},active:h,preventOpen:g,pydio:y,formStyles:x.searchForm,searchTools:r,onRequestOpen:function(){return b(!0)},onRequestClose:function(){return b(!1)}}),c&&t().createElement("div",{style:{marginTop:14,marginRight:8}},t().createElement(a.CircularProgress,{size:20,thickness:2}))),h&&t().createElement(q,{searchTools:r,containerStyle:{width:"100%",paddingTop:11,marginBottom:-4}})),h&&t().createElement("div",{className:"layout-fill",style:{width:"100%",display:"flex"}},R().getViewportWidth()>758&&t().createElement(W,{pydio:y,facets:o,activeFacets:i,onToggleFacet:l,emptyStateView:t().createElement("div",{style:{fontWeight:500,padding:"10px 0px",fontSize:15}}),styles:x.facets,zDepth:w?0:void 0,topPane:!u&&p>0&&t().createElement(B,{searchTools:r})}),t().createElement(D,{containerStyle:{flex:1,marginLeft:10},className:"files-list vertical_fit",elementHeight:M.HEIGHT_TWO_LINES,entryRenderIcon:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t().createElement(A,{loadThumbnail:!r.parentIsScrolling,node:e})},entryRenderActions:function(){return null},entryRenderSecondLine:function(e){var r=e.getPath(),n=e.getMetadata(),o=new Date;o.setTime(1e3*parseInt(n.get("ajxp_modiftime")));var i,a,l=L(o).fromNow();return parseInt(e.getMetadata().get("bytesize"))&&(i=E().roundFileSize(parseInt(e.getMetadata().get("bytesize")))),E().getDirname(r)&&(a=y.MessageHash["user_home.search.result.location"]+": "+E().getDirname(r)||"/"),t().createElement("div",null,l," ",i?t().createElement("span",null,"• ",i):""," ",a?t().createElement("span",null,"• ",a):null)},entryRenderGroupHeader:function(e,r){return t().createElement("div",{style:{fontSize:13,color:"#93a8b2",fontWeight:500,cursor:"pointer"},onClick:function(){return y.triggerRepositoryChange(e)}},r)},presetDataModel:s,presetRootNode:s.getSearchNode(),openCollection:function(e){y.goTo(e)},nodeClicked:function(e){y.goTo(e)},defaultGroupBy:"repository_id",groupByLabel:"repository_display",emptyStateProps:P})),t().createElement("div",{style:{display:h?"none":"block",flex:1,overflowY:h?"auto":"hidden"},id:"history-block"},this.props.children)),h&&t().createElement(a.IconButton,{iconClassName:"mdi mdi-close",style:x.close,onClick:function(){return b(!1)},tooltipPosition:"bottom-left",tooltip:y.MessageHash[86]}))}}],n&&T(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),c}(e.Component);U=I(U=H(U,"main","all")),U=(0,l.muiThemeable)()(U);const G=require("pydio/model/meta-node-provider");var J=r.n(G);const V=require("pydio/http/api");var Y=r.n(V);const X=require("cells-sdk");function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function K(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?K(Object(r),!0).forEach((function(t){Z(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Z(e,t,r){return(t=se(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ee(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&te(e,t)}function te(e,t){return te=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},te(e,t)}function re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=oe(e);if(t){var o=oe(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===ie(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ne(e)}(this,r)}}function ne(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oe(e){return oe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},oe(e)}function ie(e){return ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ie(e)}function ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function le(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,se(n.key),n)}}function ce(e,t,r){return t&&le(e.prototype,t),r&&le(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function se(e){var t=function(e,t){if("object"!==ie(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==ie(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===ie(t)?t:String(t)}var ue=i().requireLib("boot"),pe=ue.PydioContextConsumer,fe=ue.moment,de=ue.M3Tooltip,me=i().requireLib("workspaces").FilePreview,ye=i().requireLib("hoc"),he=ye.PlaceHolder,ge=ye.PhTextRow,be=ye.PhRoundShape,ve=function(){function e(t,r){ae(this,e),this.pydio=t,this.stater=r}return ce(e,[{key:"m",value:function(e){return this.pydio.MessageHash["user_home.reco."+e]||e}},{key:"load",value:function(){var e=this,t=new X.GraphServiceApi(Y().getRestClient()),r=new X.RestRecommendRequest;return r.Limit=8,t.recommend(r).then((function(t){return(t.Nodes||[]).map((function(t){var r;if(t.AppearsIn?r=t.AppearsIn[0].WsSlug:t.MetaStore.ws_slug&&(r=JSON.parse(t.MetaStore.ws_slug)),t.MetaStore["reco-annotation"]){var n=JSON.parse(t.MetaStore["reco-annotation"]);if(0===n.indexOf("activity:")){var o=n.replace("activity:","");t.MetaStore.card_legend=JSON.stringify(fe(1e3*o).fromNow())}else"bookmark"===n?t.MetaStore.card_legend=JSON.stringify(e.m("bookmark")):"workspace"===n&&('"ROOM"'===t.MetaStore.ws_scope?(t.MetaStore.card_legend=JSON.stringify(e.m("cell")),t.MetaStore.fonticon=JSON.stringify("icomoon-cells")):t.MetaStore.card_legend=JSON.stringify(e.m("workspace")))}return J().parseTreeNode(t,r)}))}))}}]),e}(),we=function(e){ee(n,e);var r=re(n);function n(e){var t;return ae(this,n),(t=r.call(this,e)).state={opacity:0},t}return ce(n,[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){e.setState({opacity:1})}),200)}},{key:"render",value:function(){var e=this,r=this.state,n=r.opacity,o=r.hover,i=this.props.legend,l=this.props,c=l.title,s=l.node,u=l.pydio,p=l.muiTheme,f=l.last,d=l.display,m=void 0===d?"list":d,y={paper:{width:140,height:160,margin:10,padding:6,borderRadius:6,boxShadow:o?"0px 15px 30px -6px rgba(0, 0, 0, .15)":"-1px 0px 15px 0px rgba(0, 0, 0, 0.1)",display:"flex",flexDirection:"column",cursor:"pointer",alignItems:"center",textAlign:"center",opacity:n,transition:"all 250ms cubic-bezier(0.23, 1, 0.32, 1) 0ms"},preview:{boxShadow:"0 0 0 1px #edf0f2",borderRadius:6,width:"100%",flex:1,alignItems:"center",justifyContent:"center",display:"flex"},mimeFontStyle:{fontSize:40},fontOverlay:{position:"absolute",bottom:0,right:5},label:{fontSize:14,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",width:"100%"},title:{fontSize:14,marginTop:10},legend:{fontSize:11,fontWeight:500,color:"#9E9E9E"},interDiv:{width:"100%",overflow:"hidden"}};if("mui3"===p.userTheme){var h=p.palette.mui3;if(y.paper=Q(Q({},y.paper),{},{width:160,height:190,borderRadius:12,boxShadow:null,margin:4,padding:0,paddingBottom:6,background:h.surface,color:h["on-surface"]}),y.preview=Q(Q({},y.preview),{},{borderRadius:12,boxShadow:null}),y.label=Q(Q({},y.label),{},{paddingLeft:10,textAlign:"left"}),y.title.fontWeight=500,y.legend.color=h["on-surface-variant"],y.legend.fontWeight=400,"list"===m&&(y.paper=Q(Q({},y.paper),{},{background:o?"var(--md-sys-color-hover-background)":"none",border:0,margin:0,borderBottom:f?"none":"1px solid rgba(0,0,0,.05)",borderRadius:0,width:"100%",height:74,flexDirection:"row",padding:"0 16px",paddingBottom:0}),y.preview={borderRadius:6,width:40,height:40,display:"flex",alignItems:"center",justifyContent:"center"},y.interDiv={flex:1,overflow:"hidden",paddingLeft:8},y.mimeFontStyle={fontSize:20},y.title.marginTop=0,y.title.fontSize=15,y.legend.fontSize=12,s.getMetadata().has("reco-annotation")&&0===s.getMetadata().get("reco-annotation").indexOf("activity:"))){var g=s.getMetadata().get("repository_id"),b=u.user.getRepositoriesList().get(g).getLabel(),v=E().getDirname(s.getPath());"/"!==v&&v?v+=" - ":v="",i="["+b+"] "+v+i}}return t().createElement(a.Paper,{zDepth:0,style:y.paper,onClick:function(){u.goTo(s)},onMouseOver:function(){return e.setState({hover:!0})},onMouseOut:function(){return e.setState({hover:!1})},title:s&&s.getLabel()},s&&t().createElement(me,{node:s,style:y.preview,mimeFontStyle:y.mimeFontStyle,loadThumbnail:!0,mimeFontOverlay:!0,mimeFontOverlayStyle:y.fontOverlay}),t().createElement("div",{style:Q({},y.interDiv)},t().createElement("div",{style:Q(Q({},y.label),y.title)},c),t().createElement("div",{style:Q(Q({},y.label),y.legend)},i)))}}]),n}(t().Component),Se="pydio.homepage.list.layout",Oe=function(e){ee(n,e);var r=re(n);function n(e){var t;ae(this,n),(t=r.call(this,e)).loader=new ve(e.pydio,ne(t));var o=!1;return"mui3"===t.props.muiTheme.userTheme&&(o="true"===localStorage.getItem(Se)),t.state={nodes:[],loading:!1,list:o},t}return ce(n,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0}),this.loader.load().then((function(t){e.setState({nodes:t,loading:!1})})).catch((function(t){console.error(t),e.setState({loading:!1})}))}},{key:"toggleList",value:function(){var e=!this.state.list;this.setState({list:e}),e?localStorage.setItem(Se,"true"):localStorage.removeItem(Se)}},{key:"render",value:function(){var e=this,r=this.props,n=r.pydio,o=r.style,i=r.muiTheme,a=this.state,l=a.nodes,c=a.loading,s=a.list,u={margin:10,width:140,height:160,padding:6,display:"flex",flexDirection:"column",alignItems:"center",borderRadius:6};"mui3"===i.userTheme&&(u.width=160,u.height=190,u.margin=4,u.borderRadius=12);var p,f=t().createElement("div",{style:{display:"flex",flexWrap:"wrap"}},(p=Array(8).keys(),function(e){if(Array.isArray(e))return $(e)}(p)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(p)||function(e,t){if(e){if("string"==typeof e)return $(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?$(e,t):void 0}}(p)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).map((function(){return t().createElement("div",{style:u},t().createElement(be,{style:{width:"100%",height:100,borderRadius:u.borderRadius}}),t().createElement(ge,null),t().createElement(ge,null))})));if(!n.user||n.user.lock)return t().createElement("div",null);var d={},m=[],y=0;return l.forEach((function(e){var r=e.getMetadata().get("uuid");d[r]||m.length>=8||(y++,d[r]=r,m.push(t().createElement(we,{key:r,last:8===y,pydio:n,muiTheme:i,node:e,title:e.getLabel(),legend:e.getMetadata().get("card_legend"),display:s?"list":"thumb"})))})),t().createElement("div",{style:{maxHeight:"calc(100%  - 40px)",overflow:"hidden",display:"flex",flexDirection:"column",borderRadius:"var(--md-sys-color-paper-border-radius)",background:"var(--md-sys-color-surface-1)",marginTop:20}},t().createElement("div",{style:{display:"flex",padding:"16px 16px 6px",color:"var(--md-sys-color-secondary)",fontWeight:500}},t().createElement("div",{style:{flex:1}},n.MessageHash["user_home.87"]),"mui3"===i.userTheme&&t().createElement(de,{title:t().createElement("span",{style:{padding:"0 8px"}},n.MessageHash[s?"193":"192"])},t().createElement("span",{className:"mdi mdi-view-"+(s?"grid":"list"),onClick:function(){return e.toggleList()},style:{cursor:"pointer",fontSize:16}}))),t().createElement("div",{style:{overflowY:"auto",flex:1}},t().createElement("div",{style:Q({display:"flex",flexWrap:"wrap",justifyContent:"center"},o)},t().createElement(he,{ready:!c,showLoadingAnimation:!0,customPlaceholder:f},m))))}}]),n}(t().Component);Oe=pe(Oe);const xe=require("lodash");function Ee(e){return Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ee(e)}function Pe(){return Pe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Pe.apply(this,arguments)}function Re(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function je(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Re(Object(r),!0).forEach((function(t){Te(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Re(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Te(e,t,r){return(t=Ce(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ke(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ce(n.key),n)}}function Ce(e){var t=function(e,t){if("object"!==Ee(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Ee(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Ee(t)?t:String(t)}function _e(e,t){return _e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_e(e,t)}function Me(e){return Me=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Me(e)}var De=i().requireLib("workspaces").MasterLayout,Ne=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_e(e,t)}(c,e);var r,n,o,i,l=(o=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Me(o);if(i){var r=Me(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Ee(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=l.call(this,e)).state={unreadStatus:0,drawerOpen:!0},t.showTutorial()||(t.closeTimeout=setTimeout((function(){t.setState({drawerOpen:!1})}),2500)),t._resizeEventDebounced=(0,xe.debounce)((function(){window.dispatchEvent(new Event("resize")),t.setState({fullScreenTransition:!1})}),350),t}return r=c,(n=[{key:"showTutorial",value:function(){var e=this.props.pydio,t=e.user?e.user.getPreference("gui_preferences",!0):[];return e.getPluginConfigs("gui.ajax").get("ENABLE_WELCOME_TOUR")&&!t["WelcomeComponent.Pydio8.TourGuide.Welcome"]}},{key:"openDrawer",value:function(e){e.stopPropagation(),this.clearCloseTimeout(),this.setState({drawerOpen:!0})}},{key:"clearCloseTimeout",value:function(){this.closeTimeout&&clearTimeout(this.closeTimeout)}},{key:"render",value:function(){var e,r=this,n=this.props,o=n.pydio,i=n.muiTheme,l=this.state,c=l.drawerOpen,u=l.fullScreen,p=l.fullScreenTransition,f=new a.Color(i.appBar.color),d="mui3"===i.userTheme,m=i.palette.mui3,y=i.buildFSTemplate({});y.appBarStyle={backgroundColor:i.darkMode?"rgba(0, 0, 0, 0.4)":"rgba(255, 255, 255, 0.40)",height:u?0:200,display:"flex",alignItems:"center",justifyContent:"center"},y.buttonsStyle={color:i.appBar.textColor},y.iconButtonsStyle={color:f.darken(.4).toString()},y.wsListsContainerStyle={flex:1,display:"flex",flexDirection:"column",alignItems:"center",backgroundColor:d?m.surface:"white",overflow:"hidden"},this.showTutorial()&&(e=t().createElement(O,{ref:"welcome",pydio:o,onFinish:function(){r.closeTimeout=setTimeout((function(){r.setState({drawerOpen:!1})}),1500)}}));var h={};"mui3"!==i.userTheme&&(h={position:"absolute",bottom:0,top:0,zIndex:1e3,transform:c?"translateX(0px)":"translateX(-250px)"});var g={style:je(je({},y.leftPanel.masterStyle),h),headerHeight:72,onMouseOver:function(){r.clearCloseTimeout()},userWidgetProps:{mergeButtonInAvatar:!0,popoverDirection:"left",actionBarStyle:{marginTop:0},style:{height:72,display:"flex",alignItems:"center",boxShadow:"none",background:"transparent"}}};return t().createElement(De,{pydio:o,classes:["vertical_fit","react-fs-template","user-dashboard-template"],style:je(je({},y.masterStyle),{},{backgroundColor:"transparent"}),tutorialComponent:e,leftPanelProps:g,drawerOpen:c,onCloseDrawerRequested:function(){void 0===e&&r.setState({drawerOpen:!1})}},t().createElement(a.Paper,{zDepth:0,style:je({},y.appBarStyle),rounded:!1},!d&&t().createElement("span",{className:"drawer-button",style:{position:"absolute",top:6,left:2,zIndex:2}},t().createElement(a.IconButton,{iconStyle:{color:null},iconClassName:"mdi mdi-menu",onClick:this.openDrawer.bind(this)})),t().createElement("div",{style:{width:250,display:"flex",justifyContent:"center"}},t().createElement(s,{className:"home-top-logo",style:{maxHeight:100},pydio:this.props.pydio,darkMode:i.darkMode,pluginName:"gui.ajax",pluginParameter:"CUSTOM_DASH_LOGO"}))),t().createElement(U,Pe({zDepth:0},this.props,{style:y.wsListsContainerStyle,fullScreen:u,fullScreenTransition:p,onFocusChange:function(e){e!==r.state.fullScreen&&r.setState({fullScreen:e,fullScreenTransition:!0},r._resizeEventDebounced)}}),t().createElement(Oe,Pe({},this.props,{style:{maxWidth:680,width:"100%",padding:"8px 0"},emptyStateProps:{style:{backgroundColor:"transparent"}}}))))}}])&&ke(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),c}(t().Component);Ne=(0,l.muiThemeable)()(Ne)})(),window.WelcomeComponents=n})();