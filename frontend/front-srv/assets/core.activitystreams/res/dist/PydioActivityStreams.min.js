(()=>{"use strict";var e={n:t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return e.d(r,{a:r}),r},d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})}};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var t={};e.r(t),e.d(t,{ASClient:()=>m,Activity:()=>Z,ActivityList:()=>pe,Callbacks:()=>Pe,InfoPanel:()=>ge,Listener:()=>Se,OverlayPanel:()=>Ze,WatchSelector:()=>Me,WatchSelectorMui3:()=>Ve});const r=require("react");var n=e.n(r);const o=require("material-ui"),i=require("prop-types");var a=e.n(i);const c=require("pydio");var l=e.n(c);const u=require("pydio/http/api");var s=e.n(u);const f=require("cells-sdk");function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==p(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===p(o)?o:String(o)),n)}var o}var m=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r;return t=e,r=[{key:"loadActivityStreams",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"USER_ID",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"outbox",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:-1;if(!t)return Promise.resolve([]);var a=new f.ActivityServiceApi(s().getRestClient()),c=new f.ActivityStreamActivitiesRequest;return c.Context=e,c.ContextData=t,c.BoxName=r,o>-1&&(c.Offset=o),i>-1&&(c.Limit=i),c.Language=l().getInstance().user.getPreference("lang")||"",n&&(c.PointOfView=n),a.stream(c)}},{key:"UnreadInbox",value:function(e){var t=new f.ActivityServiceApi(s().getRestClient()),r=new f.ActivityStreamActivitiesRequest;return r.Context="USER_ID",r.ContextData=e,r.BoxName="inbox",r.UnreadCountOnly=!0,t.stream(r).then((function(e){return e.totalItems||0}))}}],null&&y(t.prototype,null),r&&y(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const d=require("react-markdown");var b=e.n(d);const v=require("material-ui/styles"),h=require("pydio/util/path");var g=e.n(h);function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){E(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function E(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==w(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===w(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var P=l().requireLib("boot").PydioContextConsumer;function _(e,t){var r=[],n=t.user.getActiveRepository();if(!(e&&e.partOf&&e.partOf.items&&e.partOf.items.length))return r;for(var o=0;o<e.partOf.items.length;o++){var i=e.partOf.items[o],a=i.rel.split("/");a.shift();var c=a.join("/");0!==c.indexOf("/")&&(c="/"+c);var l=new AjxpNode(c,"Document"===e.type);if(l.getMetadata().set("repository_id",i.id),l.getMetadata().set("repository_label",i.name),l.getMetadata().set("filename",c),i.id===n)return[l];r.push(l)}return r}var T=function(e){var t=e.pydio,o=e.activity,i=e.children,a=e.linkStyle;o.object.name||(o.object.name="");var c=_(o.object,t);if(0===c.length)return null;var l=o.object.name.replace("doc://","").split("/");l.shift();var u,s="/"+l.join("/");if(c.length>1){var f=[" (",n().createElement("span",null,t.MessageHash["bookmark.secondary.inside"].toLowerCase()," ")];c.sort((function(e,t){return e.getMetadata().get("repository_label").localeCompare(t.getMetadata().get("repository_label"))}));var p=c.map((function(e,r){var o=n().createElement("a",{style:j({},a),onClick:function(r){r.stopPropagation(),t.goTo(e)}},e.getMetadata().get("repository_label"));return r===c.length-1?o:n().createElement("span",null,o,", ")}));return f.push.apply(f,(u=p,function(e){if(Array.isArray(e))return O(e)}(u)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(u)||function(e,t){if(e){if("string"==typeof e)return O(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?O(e,t):void 0}}(u)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([")"])),n().createElement(r.Fragment,null,n().createElement("span",{title:s},i)," ",f)}return n().createElement("a",{title:s,style:j({cursor:"pointer",color:"rgb(66, 140, 179)"},a),onClick:function(){t.goTo(c[0])}},i)};function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}T.PropTypes={activity:a().object,pydio:a().instanceOf(l())},T=P(T);var x=["node"],A=["node"],M=["node"],k=["node"];function R(){return R=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},R.apply(this,arguments)}function I(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function H(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach((function(t){W(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function W(e,t,r){return(t=q(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function N(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,q(n.key),n)}}function B(e,t,r){return t&&L(e.prototype,t),r&&L(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function q(e){var t=function(e,t){if("object"!==C(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==C(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===C(t)?t:String(t)}function F(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&U(e,t)}function U(e,t){return U=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},U(e,t)}function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=V(e);if(t){var o=V(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===C(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return G(e)}(this,r)}}function G(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function V(e){return V=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},V(e)}var $=l().requireLib("components").UserAvatar,Y=l().requireLib("boot").PydioContextConsumer,J=l().requireLib("workspaces").FilePreview,K=(l().requireLib("boot").moment,function(e){F(r,e);var t=z(r);function r(){return N(this,r),t.apply(this,arguments)}return B(r,[{key:"render",value:function(){return n().createElement("span",null,this.props.children)}}]),r}(n().Component)),Q=function(e){var t=e.pydio,r=e.activity,o=e.href,i=e.children,a=e.style,c=H({cursor:"pointer",color:"rgb(66, 140, 179)",fontWeight:500},void 0===a?void 0:a),l=null;if(o.startsWith("doc://"))return"Delete"===r.type?n().createElement("a",{style:{textDecoration:"line-through"}},i):n().createElement(T,{pydio:t,activity:r,linkStyle:c},i);if(o.startsWith("user://")){var u=o.replace("user://","");return n().createElement($,{userId:u,displayAvatar:!1,richOnClick:!0,style:H(H({},c),{},{display:"inline-block"}),pydio:t})}if(o.startsWith("workspaces://")){var s=o.replace("workspaces://","");t.user&&t.user.getRepositoriesList().get(s)&&(l=function(){t.triggerRepositoryChange(s)})}return n().createElement("a",{title:"",style:c,onClick:l},i)},X=function(e){F(o,e);var t=z(o);function o(e){var r;return N(this,o),(r=t.call(this,e)).memoizeCustomComponents(e),r}return B(o,[{key:"componentWillReceiveProps",value:function(e,t){this.memoizeCustomComponents(e)}},{key:"memoizeCustomComponents",value:function(e){var t=e.activity,r=e.listContext,o=l().getInstance();this.customComponents="NODE-LEAF"===r?{p:function(e){e.node;var t=I(e,x);return n().createElement(K,t)},a:function(e){return e.node,I(e,A),null}}:{p:function(e){e.node;var t=I(e,M);return n().createElement(K,t)},a:function(e){e.node;var r=I(e,k);return n().createElement(Q,R({pydio:o,activity:t,style:{color:"inherit"}},r))}}}},{key:"render",value:function(){var e,t=this.props,o=t.activity,i=t.inlineActor;return o.summary?(i&&o.actor&&(e=n().createElement($,{userId:o.actor.id,userLabel:o.actor.name,displayLocalLabel:!0,userType:"user",pydio:l().getInstance(),style:{display:"inline-block"},labelStyle:{display:"inline-block"},displayAvatar:!1,richOnHover:!1})),n().createElement(r.Fragment,null,e,e?" - ":null,n().createElement(b(),{components:this.customComponents,style:{display:"inline"},urlTransform:function(e){return e},containerTagName:i?"span":"div"},o.summary))):n().createElement("span",null,o.type," ",o.actor?" - "+o.actor.name:"")}}]),o}(n().Component),Z=function(e){F(r,e);var t=z(r);function r(){var e;N(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return W(G(e=t.call.apply(t,[this].concat(o))),"state",{hover:!1}),e}return B(r,[{key:"computeIcon",value:function(e){var t,r,n="";switch(e.type){case"Create":n="Document"===e.object.type?"file-plus":"folder-plus",t="Created";break;case"Delete":n="delete",t="Deleted";break;case"Edit":case"Update":n="pencil",t="Modified";break;case"UpdateMeta":n="tag-multiple",t="Modified";break;case"UpdateComment":n="message-outline",t="Commented";break;case"Read":n="eye",t="Accessed";break;case"Move":n="file-send",t="Moved";break;case"Event":n="bell-outline",t="Event";break;case"Share":n="share-variant","Cell"===e.object.type?n="icomoon-cells":"Workspace"===e.object.type&&(n="folder"),t="Shared",r="mdi mdi-share-variant"}return-1===n.indexOf("icomoon-")&&(n="mdi mdi-"+n),{title:t,className:n,actionIcon:r}}},{key:"render",value:function(){var e,t=this,r=this.props,i=r.pydio,a=r.activity,c=r.listContext,l=r.muiTheme,u=r.styles,s=r.onRequestClose,f=void 0===s?function(){}:s,p=this.state.hover,y=this.computeIcon(a),m=y.className,d=y.actionIcon,b={margin:0,padding:"10px 0"};p&&(b=H(H({},b),{},{backgroundColor:l.hoverBackgroundColor}));var v,h,w,O=_(a.object,i);if(O.length?(v=n().createElement("div",{style:{padding:"12px 20px 12px 20px",position:"relative"}},n().createElement(J,{pydio:i,node:O[0],loadThumbnail:!0,style:u.mFontContainer,mimeFontStyle:u.mFont}),n().createElement("span",{className:m,style:H(H({},u.actionIcon),{},{bottom:10,right:18})})),h=O[0].getLabel()||g().getBasename(O[0].getPath())):(v=n().createElement("div",{className:"mimefont-container",style:H({margin:"8px 20px",position:"relative"},u.mFontContainer)},n().createElement(o.FontIcon,{className:m,style:u.mFont}),d&&n().createElement("span",{className:d,style:u.actionIcon})),h=a.object?a.object.name:a.name),e=n().createElement("div",{style:{display:"flex",alignItems:"flex-start",overflow:"hidden",paddingBottom:8}},v,n().createElement("div",{style:{flex:1,overflow:"hidden",paddingRight:16}},n().createElement("div",{style:{marginBottom:4,fontSize:14,fontWeight:500,whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",color:"var(--md-sys-color-on-surface)"}},h),n().createElement("div",{style:{opacity:1}},n().createElement(X,{activity:a,listContext:c})))),"Delete"!==a.type&&a.object&&("Folder"===a.object.type||"Document"===a.object.type)){var S=_(a.object,i);S.length&&(w=function(){i.goTo(S[0]),f()},b.cursor="pointer")}return n().createElement("div",{style:b,onMouseEnter:function(){return t.setState({hover:!0})},onMouseLeave:function(){return t.setState({hover:!1})},onClick:w},e)}}]),r}(n().Component);function ee(e){return ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ee(e)}function te(e){return function(e){if(Array.isArray(e))return re(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return re(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?re(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ne(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==ee(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==ee(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===ee(o)?o:String(o)),n)}var o}function oe(e,t){return oe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},oe(e,t)}function ie(e){return ie=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ie(e)}Z.PropTypes={activity:a().object,listContext:a().string,displayContext:a().oneOf(["infoPanel","popover"])},Z=Y(Z=(0,v.muiThemeable)()(Z));var ae=l().requireLib("boot"),ce=ae.PydioContextConsumer,le=ae.moment,ue=l().requireLib("components"),se=ue.EmptyStateView,fe=ue.Timeline,pe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oe(e,t)}(c,e);var t,r,o,i,a=(o=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ie(o);if(i){var r=ie(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===ee(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),t=a.call(this,e),e.items?t.state={data:{items:e.items},offset:0,loadMore:!1,loading:!1}:t.state={data:[],offset:0,loadMore:!0,loading:!1},t}return t=c,(r=[{key:"mergeMoreFeed",value:function(e,t){var r=e.items.map((function(e){return e.id})),n=t.items.filter((function(e){return-1===r.indexOf(e.id)}));if(!n.length)return this.setState({loadMore:!1}),e;var o=e;return o.items=[].concat(te(e.items),te(n)),o.totalItems=o.items.length,o}},{key:"loadForProps",value:function(e){var t=this,r=e.context,n=e.pointOfView,o=e.contextData,i=e.limit,a=this.state,c=a.offset,l=a.data;void 0===i&&(i=-1),c>0&&(i=100),this.setState({loading:!0,error:null}),m.loadActivityStreams(r,o,"outbox",n,c,i).then((function(e){c>0&&l&&l.items?e&&e.items&&t.setState({data:t.mergeMoreFeed(l,e)}):t.setState({data:e}),e&&e.items&&e.items.length||t.setState({loadMore:!1}),t.setState({loading:!1})})).catch((function(e){t.setState({loading:!1,error:e})}))}},{key:"componentWillMount",value:function(){var e=this.props,t=e.items,r=e.contextData;t||r&&this.loadForProps(this.props)}},{key:"componentWillReceiveProps",value:function(e){var t=this;e.items?this.setState({data:{items:e.items},offset:0,loadMore:!1}):e.contextData===this.props.contextData&&e.context===this.props.context||this.setState({offset:0,loadMore:!0},(function(){t.loadForProps(e)}))}},{key:"render",value:function(){var e=this,t=this.props,r=t.listContext,o=t.pydio,i=this.state,a=i.data,c=i.loadMore,l=i.loading,u=i.error,s="mdi mdi-pulse",f=l?o.MessageHash["notification_center.17"]:o.MessageHash["notification_center.18"];u&&(f=u.Detail||u.msg||u,s="mdi mdi-alert-circle-outline");var p=l?o.MessageHash["notification_center.20"]:o.MessageHash["notification_center.19"];return a&&a.items&&0!==a.items.length?n().createElement(fe,{items:a.items,className:"small",useSelection:!1,itemUuid:function(e){return e.id},itemMoment:function(e){return le(e.updated)},itemDesc:function(e){return n().createElement(X,{activity:e,listContext:r,inlineActor:!0})},itemActions:function(){return[]},itemAnnotations:function(){return null},color:"#2196f3",loadMoreAction:a.items.length&&c?function(){e.setState({offset:a.items.length+1},(function(){e.loadForProps(e.props)}))}:null,loadMoreLabel:p,loadMoreDisabled:l}):n().createElement(se,{pydio:this.props.pydio,iconClassName:s,primaryTextId:f,style:{backgroundColor:"transparent",paddingBottom:20,paddingTop:10},iconStyle:{fontSize:40},legendStyle:{fontSize:13}})}}])&&ne(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),c}(n().Component);function ye(e){return ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ye(e)}function me(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==ye(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==ye(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===ye(o)?o:String(o)),n)}var o}function de(e,t){return de=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},de(e,t)}function be(e){return be=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},be(e)}pe.PropTypes={context:a().string,contextData:a().string,boxName:a().string,pointOfView:a().oneOf(["GENERIC","ACTOR","SUBJECT"])},pe=ce(pe);var ve=Pydio.requireLib("boot").PydioContextConsumer,he=Pydio.requireLib("workspaces").InfoPanelCard,ge=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&de(e,t)}(c,e);var t,r,o,i,a=(o=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=be(o);if(i){var r=be(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===ye(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function c(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),a.apply(this,arguments)}return t=c,(r=[{key:"render",value:function(){var e=this.props,t=e.node,r=e.pydio,o=e.popoverPanel;if(!1===r.getPluginConfigs("core.activitystreams").get("ACTIVITY_SHOW_ACTIVITIES"))return null;var i=t.isLeaf()?"activity.leaf":"activity.folder",a=!t.isLeaf(),c=t.isLeaf()?r.MessageHash["notification_center.11"]:r.MessageHash["notification_center.10"];return n().createElement(he,{key:i,identifier:i,defaultOpen:a,title:c,popoverPanel:o},n().createElement(pe,{context:"NODE_ID",contextData:t.getMetadata().get("uuid"),boxName:"outbox",style:{overflowY:"scroll",maxHeight:380,padding:"8px 12px"},listContext:"NODE-"+(t.isLeaf()?"LEAF":"COLLECTION"),pointOfView:"ACTOR",displayContext:"infoPanel"}))}}])&&me(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),c}(n().Component);function we(e){return we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},we(e)}function Oe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==we(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==we(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===we(o)?o:String(o)),n)}var o}ge=ve(ge);var Se=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var r,n;return r=t,n=[{key:"dynamicBuilder",value:function(t){var r=e.g.pydio,n=r.MessageHash,o=r.getUserSelection().getUniqueNode();if(!o)return[];var i,a=[];return o.getMetadata().get("meta_watched")&&(i=o.getMetadata().get("meta_watched")),a.push({name:n["meta.watch.11"],alt:n["meta.watch."+(o.isLeaf()?"12":"12b")],icon_class:i&&"META_WATCH_CHANGE"===i?"mdi mdi-checkbox-marked-circle-outline":"mdi mdi-checkbox-blank-circle-outline",callback:function(e){this.apply("watch_change")}.bind(this)}),a.push({name:n["meta.watch.9"],alt:n["meta.watch."+(o.isLeaf()?"10":"10b")],icon_class:i&&"META_WATCH_READ"===i?"mdi mdi-checkbox-marked-circle-outline":"mdi mdi-checkbox-blank-circle-outline",callback:function(e){this.apply("watch_read")}.bind(this)}),a.push({name:n["meta.watch.13"],alt:n["meta.watch."+(o.isLeaf()?"14":"14b")],icon_class:i&&"META_WATCH_BOTH"===i?"mdi mdi-checkbox-marked-circle-outline":"mdi mdi-checkbox-blank-circle-outline",callback:function(e){this.apply("watch_both")}.bind(this)}),i&&(a.push({separator:!0}),a.push({name:n["meta.watch.3"],alt:n["meta.watch."+(o.isLeaf()?"8":"4")],icon_class:"mdi mdi-close-circle-outline",callback:function(e){this.apply("watch_stop")}.bind(this)})),a}}],null&&Oe(r.prototype,null),n&&Oe(r,n),Object.defineProperty(r,"prototype",{writable:!1}),t}();function je(e){return je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},je(e)}function Ee(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==je(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==je(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===je(o)?o:String(o)),n)}var o}var Pe=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r;return t=e,r=[{key:"toggleWatch",value:function(e,t){if(t){var r=pydio.getUserSelection().getUniqueNode(),n=r.getMetadata().get("uuid"),o=pydio.user.id,i=new f.ActivitySubscription,a=new f.ActivityOwnerType;i.UserId=o,i.ObjectId=n,i.ObjectType=a.NODE;var c=[];"watch_change"!==t&&"watch_both"!==t||c.push("change"),"watch_read"!==t&&"watch_both"!==t||c.push("read"),i.Events=c,new f.ActivityServiceApi(s().getRestClient()).subscribe(i).then((function(e){var n=r.getMetadata().get("overlay_class")||"";if("watch_stop"===t)r.getMetadata().delete("meta_watched"),r.getMetadata().set("overlay_class",n.replace("mdi mdi-bell",""));else{r.getMetadata().set("meta_watched","META_"+t.toUpperCase());var o=n.replace("mdi mdi-bell","").split(",");o.push("mdi mdi-bell"),r.getMetadata().set("overlay_class",o.join(","))}r.notify("node_replaced")}))}}}],null&&Ee(t.prototype,null),r&&Ee(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function _e(e){return _e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_e(e)}function Te(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==_e(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==_e(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===_e(o)?o:String(o)),n)}var o}function Ce(e,t){return Ce=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ce(e,t)}function xe(e){return xe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},xe(e)}var Ae=l().requireLib("hoc").ModernSelectField;const Me=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ce(e,t)}(u,e);var t,r,i,a,c=(i=u,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=xe(i);if(a){var r=xe(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===_e(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);var r=(t=c.call(this,e)).props.nodes;return t.state=t.valueFromNodes(r),t}return t=u,r=[{key:"valueFromNodes",value:function(){var e=!1,t=void 0;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((function(r){var n=r.getMetadata().get("meta_watched")||"";void 0!==t&&n!==t&&(e=!0),t=n})),{value:t,mixed:e}}},{key:"onSelectorChange",value:function(e){var t=this;if("mixed"!==e){var r=this.props,n=r.pydio,o=r.nodes;this.setState({saving:!0});var i=o.map((function(t){var r=t.getMetadata().get("uuid"),o=n.user.id,i=new f.ActivitySubscription,a=new f.ActivityOwnerType;i.UserId=o,i.ObjectId=r,i.ObjectType=a.NODE;var c=[];return"META_WATCH_CHANGE"!==e&&"META_WATCH_BOTH"!==e||c.push("change"),"META_WATCH_READ"!==e&&"META_WATCH_BOTH"!==e||c.push("read"),i.Events=c,new f.ActivityServiceApi(s().getRestClient()).subscribe(i).then((function(r){var n=t.getMetadata().get("overlay_class")||"";if(""===e)t.getMetadata().delete("meta_watched"),t.getMetadata().set("overlay_class",n.replace("mdi mdi-bell",""));else{t.getMetadata().set("meta_watched",e);var o=n.replace("mdi mdi-bell","").split(",");o.push("mdi mdi-bell"),t.getMetadata().set("overlay_class",o.join(","))}t.notify("node_replaced")}))}));Promise.all(i).then((function(){t.setState({value:e,mixed:!1}),window.setTimeout((function(){t.setState({saving:!1})}),250)})).catch((function(){t.setState({saving:!1})}))}}},{key:"render",value:function(){var e=this,t=this.props.fullWidth,r=this.state,i=r.value,a=r.mixed,c=r.saving,u=l().getInstance().MessageHash;return c?n().createElement(Ae,{value:"saving",onChange:function(e,t,r){},disabled:!0,fullWidth:t},n().createElement(o.MenuItem,{value:"saving",primaryText:u["meta.watch.selector.saving"]+"..."})):n().createElement(Ae,{value:a?"mixed":i,onChange:function(t,r,n){e.onSelectorChange(n)},fullWidth:t},a&&n().createElement(o.MenuItem,{value:"mixed",primaryText:u["meta.watch.selector.mixed"]+"..."}),n().createElement(o.MenuItem,{value:"",primaryText:u["meta.watch.selector.ignore"]}),n().createElement(o.MenuItem,{value:"META_WATCH_READ",primaryText:u["meta.watch.selector.read"]}),n().createElement(o.MenuItem,{value:"META_WATCH_CHANGE",primaryText:u["meta.watch.selector.change"]}),n().createElement(o.MenuItem,{value:"META_WATCH_BOTH",primaryText:u["meta.watch.selector.both"]}))}}],r&&Te(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(n().Component),ke=require("pydio/util/dom");var Re=e.n(ke);function Ie(e){return Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ie(e)}function De(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,qe(n.key),n)}}function He(e,t){return He=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},He(e,t)}function We(e){return We=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},We(e)}function Ne(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Le(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ne(Object(r),!0).forEach((function(t){Be(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ne(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Be(e,t,r){return(t=qe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qe(e){var t=function(e,t){if("object"!==Ie(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Ie(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Ie(t)?t:String(t)}function Fe(e,t){if(e){if("string"==typeof e)return Ue(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ue(e,t):void 0}}function Ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ze=function(e){var t,o,i=e.baseWidth,a=e.open,c=e.style,l=e.children,u=(0,r.useRef)(null),s=(t=(0,r.useState)(i),o=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(t,o)||Fe(t,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),f=s[0],p=s[1];return(0,r.useLayoutEffect)((function(){a&&u.current?p(u.current.scrollWidth+5):p(i)}),[a,l]),n().createElement("div",{ref:u,style:Le(Le({},c),{},{opacity:a?1:0,overflow:"hidden",transition:Re().getBeziersTransition(),width:f})},l)},Ge=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&He(e,t)}(u,e);var t,r,i,a,c=(i=u,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=We(i);if(a){var r=We(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Ie(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);var r=(t=c.call(this,e)).props.nodes;return t.state=t.valueFromNodes(r),t}return t=u,r=[{key:"valueFromNodes",value:function(){var e=!1,t=void 0;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((function(r){var n=r.getMetadata().get("meta_watched")||"";void 0!==t&&n!==t&&(e=!0),t=n})),{value:t,mixed:e}}},{key:"onSelectorChange",value:function(e){var t=this;if("mixed"!==e){var r=this.props,n=r.pydio,o=r.nodes;this.setState({saving:!0});var i=o.map((function(t){var r=t.getMetadata().get("uuid"),o=n.user.id,i=new f.ActivitySubscription,a=new f.ActivityOwnerType;i.UserId=o,i.ObjectId=r,i.ObjectType=a.NODE;var c=[];return"META_WATCH_CHANGE"!==e&&"META_WATCH_BOTH"!==e||c.push("change"),"META_WATCH_READ"!==e&&"META_WATCH_BOTH"!==e||c.push("read"),i.Events=c,new f.ActivityServiceApi(s().getRestClient()).subscribe(i).then((function(r){var n=t.getMetadata().get("overlay_class")||"";if(""===e)t.getMetadata().delete("meta_watched"),t.getMetadata().set("overlay_class",n.replace("mdi mdi-bell",""));else{t.getMetadata().set("meta_watched",e);var o=n.replace("mdi mdi-bell","").split(",");o.push("mdi mdi-bell"),t.getMetadata().set("overlay_class",o.join(","))}t.notify("node_replaced")}))}));Promise.all(i).then((function(){t.setState({value:e,mixed:!1}),setTimeout((function(){t.setState({saving:!1,animOpen:!1})}),50)})).catch((function(){t.setState({saving:!1})}))}}},{key:"render",value:function(){var e=this,t=this.props,r=t.fullWidth,i=t.muiTheme,a=t.animatedButton,c=t.readPermissionOnly,u=void 0!==c&&c,s=this.state,f=s.value,p=(s.mixed,s.saving),y=s.animOpen,m=void 0!==y&&y,d=l().getInstance().MessageHash,b=[];f&&(b=[f],"META_WATCH_BOTH"===f&&(b=["META_WATCH_READ","META_WATCH_CHANGE"]));var v=function(t){var r,n;p||(2===(r=b.indexOf(t)>-1?b.filter((function(e){return e!==t})):[].concat((n=b,function(e){if(Array.isArray(e))return Ue(e)}(n)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||Fe(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[t])).length?e.onSelectorChange("META_WATCH_BOTH"):1===r.length?e.onSelectorChange(r[0]):e.onSelectorChange(""))},h=[{value:"META_WATCH_READ",primaryText:d["meta.watch.selector.read.mui"],iconClass:"mdi mdi-eye"}];u||h.push({value:"META_WATCH_CHANGE",primaryText:d["meta.watch.selector.change.mui"],iconClass:"mdi mdi-pencil"});var g,w={root:{borderRadius:i.borderRadius,display:"flex",border:"1px solid "+(a&&!m?i.palette.mui3.primary:i.palette.mui3.outline),overflow:a?null:"hidden",alignItems:"center",margin:a?"0 6px":null,height:a?36:null},separator:{width:1,height:"100%",backgroundColor:i.palette.mui3.outline},item:{flex:1,padding:a?"7px 16px":"6px 16px",textAlign:"center",cursor:p?"progress":"pointer",whiteSpace:"nowrap"},itemSelected:{backgroundColor:i.palette.mui3["secondary-container"],color:i.palette.mui3["on-secondary-container"]},icon:{marginRight:10,fontSize:a?14:12},primaryText:{fontWeight:500,fontSize:a?13:12},animButton:{root:{borderRadius:"50%",border:0,backgroundColor:"transparent",width:36,height:36,padding:"8px 6px",margin:"0 -1px",zIndex:0},icon:{color:i.palette.mui3.primary,fontSize:20,lineHeight:"20px"}}},O=[];return h.forEach((function(e,t){O.push(e),t<h.length-1&&O.push({separator:!0})})),g=a?n().createElement("div",{style:w.root},a&&n().createElement(o.IconButton,{style:w.animButton.root,iconStyle:w.animButton.icon,iconClassName:"mdi mdi-bell"+(b.length?"":"-outline"),tooltip:d["meta.watch.selector.legend.mui"],onClick:function(){return e.setState({animOpen:!m})}}),n().createElement(ze,{style:Le(Le({},w.root),{},{border:0,margin:0,height:34}),baseWidth:0,open:m||!a},O.map((function(e){if(e.separator)return n().createElement("div",{style:w.separator});var t=Le({},w.item);return b.indexOf(e.value)>-1&&(t=Le(Le({},t),w.itemSelected)),n().createElement("div",{style:t,onClick:function(){return v(e.value)}},e.iconClass&&n().createElement("span",{className:e.iconClass,style:w.icon}),n().createElement("span",{style:w.primaryText},e.primaryText))})))):n().createElement("div",{style:w.root},O.map((function(e){if(e.separator)return n().createElement("div",{style:w.separator});var t=Le({},w.item);return b.indexOf(e.value)>-1&&(t=Le(Le({},t),w.itemSelected)),n().createElement("div",{style:t,onClick:function(){return v(e.value)}},e.iconClass&&n().createElement("span",{className:e.iconClass,style:w.icon}),n().createElement("span",{style:w.primaryText},e.primaryText))}))),r?g:n().createElement("div",{style:{display:"flex"}},g,n().createElement("div",{style:{flex:1}}))}}],r&&De(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(n().Component);const Ve=Ge=(0,v.muiThemeable)()(Ge);function $e(e){return $e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$e(e)}function Ye(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==$e(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==$e(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===$e(o)?o:String(o)),n)}var o}function Je(e,t){return Je=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Je(e,t)}function Ke(e){return Ke=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ke(e)}var Qe=l().requireLib("workspaces").InfoPanelCard,Xe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Je(e,t)}(c,e);var t,r,o,i,a=(o=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ke(o);if(i){var r=Ke(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===$e(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function c(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),a.apply(this,arguments)}return t=c,(r=[{key:"render",value:function(){var e=this.props,t=e.pydio,r=e.node,o=e.style,i=e.popoverPanel,a="mui3"===e.muiTheme.userTheme?Ve:Me;return n().createElement(Qe,{identifier:"meta-user",style:o,title:t.MessageHash["meta.watch.selector.legend.mui"],popoverPanel:i},n().createElement("div",{style:{padding:"0 16px 16px"}},n().createElement(a,{fullWidth:!0,pydio:t,nodes:[r]})))}}])&&Ye(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),c}(r.Component);const Ze=(0,v.muiThemeable)()(Xe);window.PydioActivityStreams=t})();